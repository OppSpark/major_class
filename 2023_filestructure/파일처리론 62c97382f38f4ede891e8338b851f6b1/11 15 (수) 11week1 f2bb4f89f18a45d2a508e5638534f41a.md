# 11.15.(수) 11week1

![스크린샷 2023-11-15 14.05.00.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_14.05.00.png)

하나의 보조키로 4개 까지 참조할 수 있다.

하나의 보조키에 1개의 1개의 값만 있으면 내부 단편화 문제가 있다.

![스크린샷 2023-11-15 14.06.08.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_14.06.08.png)

해결책 2: 참조값을 연결리스트로 연결

- 새 항목에 대한 보조 인덱스 재배열 불필요함
- 참조 필드이 수가 가변임
- 내부단편화 없음

이 방법의 경우

참조값의 정보를 저장하는 리스트 파일을 또 가져야함

- LabelID 리스트 파일을 따로 만듦

이 방식의 문제점은

리스트의 크기가 크면 → 메모리가 부족할 수 있음

랜덤 seek 가 많이 일어난다.

![스크린샷 2023-11-15 14.06.57.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_14.06.57.png)

![스크린샷 2023-11-15 14.11.39.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_14.11.39.png)

<aside>
💡 결속 (binding)

</aside>

![스크린샷 2023-11-15 14.15.15.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_14.15.15.png)

바인딩(결속)

a → b 에 연관 시키는 것

단단한 결속

- 직접 주소화 방식의 경우 데이터 파일에 레코드가 추가되는 순간 키와 주소가 연관된다.
- 데이터 파일의 재배열은 모든 결속된 인덱스 파일의 심각한 변경을 수반함
- 결속 시간이 빠른것은 단단한 결속이라고함
    - EX) 변수가 선언되는것

느슨한 결속

- 결속 시간이 느린것
    - EX)  선언된 변수에 값을 저장하는 시점
    

EX) C의 경우 int 타입에 char를 못넣는다.

- 단단한 결속일 확률이 높음

EX) JS처럼 타입이 없는 언어는

- 느슨한 결속일 확률이 높다.

<aside>
💡 B-tree

</aside>

![스크린샷 2023-11-15 14.33.47.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_14.33.47.png)

![스크린샷 2023-11-15 14.34.52.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_14.34.52.png)

![스크린샷 2023-11-15 14.36.13.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_14.36.13.png)

![스크린샷 2023-11-15 14.37.17.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_14.37.17.png)

이진 탐색 트리의노드는

3개의 필드를 가진다.

- 키값
- 왼쪽 주소 값
- 오른쪽 주소 값

검색 시간 복잡도는 O(log2N)

이진트리는 랜덤 seek 문제가 발생한다.

트리가 한쪽으로 치우칠 수 있다. 스큐드 트리

노드수가 n이면 n+1 개의 링크필드가 비어있다. 

- 공간 남비

![스크린샷 2023-11-15 14.47.33.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_14.47.33.png)

AVL 트리를 사용하면 스큐드 트리가 되는 것을 방지 할 수 있다.

![스크린샷 2023-11-15 14.49.13.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_14.49.13.png)

![스크린샷 2023-11-15 14.50.52.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_14.50.52.png)

AVL 트리는 검색시 안정적인 성능을 제공ㅎ마

주기억장치(램)에서 돌아가게 설계를 했음

완전 균형 트리의 검색시간 O(log2(n+1))

AVL 트리의 검색 시간  O(1.44log2(n+2))

문제점 너무 느림

![스크린샷 2023-11-15 14.52.49.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_14.52.49.png)

기존 이진 탐색 트리는 한번에 가져오는 데이터가 3개(key, 좌측 주소,우측 주소) 밖에 없으므로 페이지화된 이진트리를 사용한다.

<aside>
💡 page화 된 이진 트리

</aside>

![스크린샷 2023-11-15 14.57.14.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_14.57.14.png)

![스크린샷 2023-11-15 15.00.44.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_15.00.44.png)

특성

- 2번의 디스크 I/O로 63개의 노드중 하나를 접근 가능
- 3번 탐색으로 134,217,727개 ㅈㄴ 많은 키를 검색 가능함 (일반 이진 트리를 사용하면 27번 필요)

문제점

![스크린샷 2023-11-15 15.02.06.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_15.02.06.png)

![스크린샷 2023-11-15 15.15.20.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_15.15.20.png)

위에서 아래로 자라는 방식

- top - down 방식

![스크린샷 2023-11-15 15.23.20.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_15.23.20.png)

<aside>
💡 다단계 인덱싱

</aside>

![스크린샷 2023-11-15 15.23.29.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_15.23.29.png)

EX(

800만개의 10바이트 키를 포함한 100바이트 레코드로 구성된 800mb 파일에 대해서

![스크린샷 2023-11-15 15.34.40.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_15.34.40.png)

800만개의 데이터를 가져오기

이 중 한번의 데이터를 읽는 디스크 I/O 수

- 5번

<aside>
💡 B-tree

</aside>

B-트리 생성

![스크린샷 2023-11-15 15.43.00.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_15.43.00.png)

![스크린샷 2023-11-15 15.43.26.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_15.43.26.png)

![스크린샷 2023-11-15 15.43.19.png](11%2015%20(%E1%84%89%E1%85%AE)%2011week1%20f2bb4f89f18a45d2a508e5638534f41a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-15_15.43.19.png)

키가 인덱스레코드에 삽입 될 때는 정렬된 상태로 들어가야한다.

왼쪽에 더 많은 노드가 오도록 한다.

root 노드가 분리되면 그 위에 새로운 루트 노드가 생긴다.

보모노드의 키값은 자식노드의 가장 큰 키값으로 가진다.