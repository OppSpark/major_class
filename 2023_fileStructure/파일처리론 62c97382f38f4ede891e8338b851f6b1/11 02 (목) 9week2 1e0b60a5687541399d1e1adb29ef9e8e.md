# 11.02.(목) 9week2

<aside>
💡 6장

</aside>

![스크린샷 2023-11-02 16.05.09.png](11%2002%20(%E1%84%86%E1%85%A9%E1%86%A8)%209week2%201e0b60a5687541399d1e1adb29ef9e8e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-02_16.05.09.png)

파일의 수정 연산들

- 레코드 추가, 갱신, 삭제 등

레코드 삭제와 저장곤간 압축

- 저장공간 압추긍로 파일을 더 작게 만듦
- 삭제된 레코드에 레코드 삭제 표시
    - 최소한의 비용으로 삭제된 레코드의 복원이 가능함

![스크린샷 2023-11-02 16.07.20.png](11%2002%20(%E1%84%86%E1%85%A9%E1%86%A8)%209week2%201e0b60a5687541399d1e1adb29ef9e8e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-02_16.07.20.png)

고정 길이 의 경우 

![스크린샷 2023-11-02 16.11.27.png](11%2002%20(%E1%84%86%E1%85%A9%E1%86%A8)%209week2%201e0b60a5687541399d1e1adb29ef9e8e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-02_16.11.27.png)

동적긴 공간 재활용

- 삭제된 레코드의 삭제 표시 사용
- 삭제된 레코드의 공간은 다음에 추가될 레코들 위한 공간으로 사용 가능

신속한 재활용 방안

- 

![스크린샷 2023-11-02 16.17.09.png](11%2002%20(%E1%84%86%E1%85%A9%E1%86%A8)%209week2%201e0b60a5687541399d1e1adb29ef9e8e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-02_16.17.09.png)

![스크린샷 2023-11-02 16.17.15.png](11%2002%20(%E1%84%86%E1%85%A9%E1%86%A8)%209week2%201e0b60a5687541399d1e1adb29ef9e8e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-02_16.17.15.png)

가변길이를 삭제

- 가변 길이기 때문에 맨 앞 삭제된 공공

이선 식으로 사용하면 외부 단편화  문제가 발생할 수 있다.

<aside>
💡 외부 단편화를 해결하는 방법

</aside>

![스크린샷 2023-11-02 16.24.34.png](11%2002%20(%E1%84%86%E1%85%A9%E1%86%A8)%209week2%201e0b60a5687541399d1e1adb29ef9e8e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-02_16.24.34.png)

외부 단편화를 해결하는 방법

- 저장공간 압축 (storage compaction)
    - 왼쪽으로 쭈욱 민다.
- coalescing : 작은 빈 공간의 합병
    - 물리적으로 연속된 삭제된 레코드를 하나의 더 큰 빈공간으로 합병함
- 배치 전략(placement strategy) : avail list로 부터 빈 곤간을 선택시 다양한 전략을 사용함

<aside>
💡 배치 전략 (placement strategy)

</aside>

![스크린샷 2023-11-02 16.29.54.png](11%2002%20(%E1%84%86%E1%85%A9%E1%86%A8)%209week2%201e0b60a5687541399d1e1adb29ef9e8e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-02_16.29.54.png)

배치 전략

### First-Fit

avail list의 첫 번째 공간부터 요구하는 크기보다 큰 빈 공간이 나올때까
지 탐색

### Best-Fit

요구하는 크기와 가장 가까운 빈 공간을 탐색
avail list는 크기의 오름차순으로 정렬 됨

### Worst-Fit

avail list에서 가장 큰 빈 공간을 탐색
avail list는 크기의 내림차순으로 정렬 됨

![스크린샷 2023-11-02 16.42.16.png](11%2002%20(%E1%84%86%E1%85%A9%E1%86%A8)%209week2%201e0b60a5687541399d1e1adb29ef9e8e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-02_16.42.16.png)

![스크린샷 2023-11-02 16.42.53.png](11%2002%20(%E1%84%86%E1%85%A9%E1%86%A8)%209week2%201e0b60a5687541399d1e1adb29ef9e8e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-02_16.42.53.png)

성능 : n개 레코드 파일에 대해서

O(log2N)

- O(log2 n) + 1번의비교
- 평균적으로, O(log2 n) + 1/2 번의 비교
- 레코드들이 정렬된 상태를 요구

데이터가 정렬이 되어있어야함

파일 전체가 메모리에 적재될 수 있는 경우 메모리 내에서 정렬 : 내부 정렬(internal sorting)

- 퀵소트

퀵소트는 데이터가 메모라 안에 있을 때 만 사용 가능함

그래서

그렇지 못한 경우 외부정렬 기법을 사용(external sorting, 합병 (merging))

- 대부분의 경우 파일 전체를 메모리에 적재하기는 힘듦

![스크린샷 2023-11-02 16.49.08.png](11%2002%20(%E1%84%86%E1%85%A9%E1%86%A8)%209week2%201e0b60a5687541399d1e1adb29ef9e8e/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-02_16.49.08.png)

1 ~ 2 디스크 접근

1000개 레코드에 대한 이진 탐색은 평균 9.5번 디스크 접근을 하면 찾을 수 있음

- 적절한 성능이 아님

레코드 파일의 정령 상태로 유지해야함

- 레코드를 추가할 때 마다 모든 레코드가 정렬 성태로 유지
- 다음 요구 중 하나는 마족해야함
    - 레코드 추가 후 레코드의 재정렬 불필요
    - 파일의 재정렬이 필요하다면 신속하고 효율적으로 제공할 하는 자료구조가 필요함