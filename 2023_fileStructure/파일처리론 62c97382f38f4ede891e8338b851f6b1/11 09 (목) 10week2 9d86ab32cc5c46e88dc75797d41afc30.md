# 11.09.(목) 10week2

<aside>
💡 인덱스 파일의 구조

</aside>

![스크린샷 2023-11-09 16.04.26.png](11%2009%20(%E1%84%86%E1%85%A9%E1%86%A8)%2010week2%209d86ab32cc5c46e88dc75797d41afc30/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-09_16.04.26.png)

![스크린샷 2023-11-09 16.08.38.png](11%2009%20(%E1%84%86%E1%85%A9%E1%86%A8)%2010week2%209d86ab32cc5c46e88dc75797d41afc30/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-09_16.08.38.png)

단순 인덱스의 장점

- 입력 순으로 데이터파일을 저장히기 때문에 레코드 관리에 용이하다.

![스크린샷 2023-11-09 16.11.18.png](11%2009%20(%E1%84%86%E1%85%A9%E1%86%A8)%2010week2%209d86ab32cc5c46e88dc75797d41afc30/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-09_16.11.18.png)

다중 키 로 인덱스 검색

보조 인덱스

- 음악, 제목, 작곡가, 연주가 등으로 검색 할 수 있는 레코드들을 위한 카탈로그
    - 보조 키 필드를 사용
    

BEETHOVEN 이 보조 키

베토벤이 작곡한 엘범 데이터를 찾아가야함

보조키가 있으면 주 키(PK)는 꼭 있어야한다.

![스크린샷 2023-11-09 16.17.36.png](11%2009%20(%E1%84%86%E1%85%A9%E1%86%A8)%2010week2%209d86ab32cc5c46e88dc75797d41afc30/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-09_16.17.36.png)

보조 인덱스는 여러 개 가 될 수 있다

- ex) 출판년도를 가지는 보조 인덱스
- 저자 명을 가지는 보조 인덱스
- 출판사를 가지는 보조 인덱스

### 레코드에 값을 추가하는 과정

하나의 인덱스에 값이 추가 될 때

다른 모든 인덱스에도 해당 값이 업데이트 되어야한다.

보조 인덱스에서 검색을 할 때는 해당 값에서 받은 주 인덱스에서 해당 값을 가르키기 때문에

항상 주 인덱스를 거쳐서 값을 찾는다.

?? 틀린 정보임?? 아마도

### 레코드에 값을 삭제하는 과정

직접 주소 방식: 

주 인덱스에 k2 라는 값을 삭제한다.

나머지 보조 인덱스에 삭제된 주소 K2를 가지고 있게 된다.

모든 보조 인덱스에 k2주소를 참조하는 것을 다 삭제해야함

간접 주소 방식  :

주 인덱스에서 K2 값을 삭제한다.

보조 인덱스는 삭제 안해도됨

- 그냥 찾다가 값이 없으면 끝나기 때문

문제점 :

- 삭제가 많아 질 수록 찾는 시간이 많아진다.

해결책 :

- 가비지 컬랙션을 자주 해줘야함

![스크린샷 2023-11-09 16.35.31.png](11%2009%20(%E1%84%86%E1%85%A9%E1%86%A8)%2010week2%209d86ab32cc5c46e88dc75797d41afc30/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-09_16.35.31.png)

![스크린샷 2023-11-09 16.35.37.png](11%2009%20(%E1%84%86%E1%85%A9%E1%86%A8)%2010week2%209d86ab32cc5c46e88dc75797d41afc30/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-09_16.35.37.png)

![스크린샷 2023-11-09 16.35.45.png](11%2009%20(%E1%84%86%E1%85%A9%E1%86%A8)%2010week2%209d86ab32cc5c46e88dc75797d41afc30/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-09_16.35.45.png)

### 레코드 갱신 (수정)

![스크린샷 2023-11-09 16.40.32.png](11%2009%20(%E1%84%86%E1%85%A9%E1%86%A8)%2010week2%209d86ab32cc5c46e88dc75797d41afc30/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-09_16.40.32.png)

1. PK가 바뀐 경우
- EX) K3를 K10으로 바꾼다.
- 직접 주소 방식 :
    - 주 인덱스만 정렬 하고 다른작업이 필요 없음
- 간접 주소 방식 :
    - 
    

![스크린샷 2023-11-09 16.49.19.png](11%2009%20(%E1%84%86%E1%85%A9%E1%86%A8)%2010week2%209d86ab32cc5c46e88dc75797d41afc30/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2023-11-09_16.49.19.png)